!function(){var e={isDomLoaded:!1,classList:{},onDomLoaded:function(e){var n=function(){var n=e();_.isObject(n)&&_.isFunction(n._onLoad)&&n._onLoad()};this.isDomLoaded?n():document.addEventListener("DOMContentLoaded",n)},onWindowLoad:function(){e.isDomLoaded=!0},use:function(n){var t=_.get(e.classList,n);return _.isFunction(t)&&(t=t(),_.set(e.classList,n,t)),t},define:function(n,t){_.isFunction(n)?e.onDomLoaded(n):_.isString(n)&&_.isFunction(t)&&e.onDomLoaded(function(){var r=t();_.set(window,n,r),_.set(e.classList,n,r)})}};window.addEventListener("load",e.onWindowLoad),window.use=e.use,window.space=e.define}(),space("bundle.kernel.loader",function(){var e={loaded:{},aliases:{}},n={isDefined:function(e,n){for(var t in e){var r=e[t];if("object"==typeof n[r])n=n[r];else if(void 0===n[r])return!1}return!0},define:function(e,n,t){for(var r in e){var i=e[r];"object"!=typeof n[i]&&(n[i]={}),n=n[i]}n=t},forgeNamespaceRecursive:function(e,n){for(var t in e){var r=e[t];"object"!=typeof n[r]&&(n[r]={}),n=n[r]}return n},get:function(e){var t=e.split(".");return n.forgeNamespaceRecursive(t,window)}};return{isDefined:function(e,t){t=void 0===t?window:t;var r=e.split(".");return n.isDefined(r,t)},_getAlias:function(n){for(var t in e.aliases){var r=t,i=e.aliases[t];if(0===n.indexOf(r+"."))return{from:r,to:i}}return!1},setAlias:function(n,t){e.aliases[n]=t},getAlias:function(e){var n=this._getAlias(e);return n&&(e=n.to+e.substr(n.from.length)),e},requireClasses:function(e,n){for(var t in e){var r=e[t];this.requireClass(r)}},requireClass:function(t,r){var i=t;if(r=_.defaultTo(r,function(){}),this.isDefined(i))return r(),i;if(i=this.getAlias(i),this.isDefined(i))return r(),i;var o="/"+i.split(".").join("/")+".js";return!0===e.loaded[o]?(r(),i):(this.requireScript(o,r),e.loaded[o]=!0,console.info('Script loaded "'+o+'"!'),n.get(t))},requireScript:function(e,n){jQuery.ajax({url:e,dataType:"script",complete:n,async:!0})}}}),space(function(){window.container={instance:function(e,n,t){return _.isString(e)&&(e=use(e)),bundle.helper.class.create(e,n,t)},has:function(e){return bundle.kernel.loader.isDefined(e,this)}}}),space("bundle.kernel.bootstrap",function(){return{initContainer:function(){},initConfig:function(){},run:function(e){this.initContainer(),this.initConfig(),console.info("default kernel launch")}}}),space(function(){window.dump=function(e){console.log(e)},window.d=window.dump}),space("bundle.helper.ajax",function(){return{errorCallback:function(e,n){var t=window.bundle.helper.ajax.getErrorMessage(e,n);container.notify.error("Произошла ошибка запроса!<br/>"+t)},prepareRequest:function(e){return bundle.helper.php.is_function(e.error)||(e.error=this.errorCallback),bundle.helper.php.is_function(e.complete)||(e.complete=function(){}),e.dataType=bundle.helper.value.default(e.dataType,"json"),e},sendAtInterval:function(e,n,t){_.isInteger(t)||(t=1e3),t=bundle.helper.value.default(t,1e3);bundle.helper.func.callAtInterval(n,function(){return bundle.helper.ajax.send(e)},t)},send:function(e){var n=_.clone(e);this.prepareRequest(n);return new Promise(function(t,r){n.success=function(n){_.isFunction(e.success)&&e.success(n),t(n)},n.error=function(n){_.isFunction(e.error)&&e.error(n),r(n)},$.ajax(n)})},getErrorMessage:function(e,n){return 0===e.status?"Not connect.\n Verify Network.":404==e.status?"Requested page not found. [404]":500==e.status?"Internal Server Error [500].":"parsererror"===n?"Requested JSON parse failed.":"timeout"===n?"Time out error.":"abort"===n?"Ajax request aborted.":"Uncaught Error.\n"+e.responseText}}}),space("bundle.helper.localStorage",function(){return{get:function(e,n){var t=null,r=localStorage.getItem(e);return _.isEmpty(r)||(t=JSON.parse(r)),t=_.defaultTo(t,n)},set:function(e,n){var t=JSON.stringify(n);localStorage.setItem(e,t)},remove:function(e){localStorage.removeItem(e)}}}),space("bundle.helper.dom",function(){return{appendToBody:function(e){$("body").append($(e))},bindEventForList:function(e,n){e.each(function(e,t){bundle.helper.dom.bindEvent(this,n)})},bindEventForAttribute:function(e,n,t){var r=t.substr(2);container.event.registerHandler(n,function(n){var i=bundle.spa.template.compile(e.attr(t),n);"html"===r?e.html(i):e.attr(r,i)})},bindEvent:function(e,n){var t=$(e),r=bundle.helper.dom.getAttributes(e);$.each(r,function(e,r){0===e.indexOf("m-")&&bundle.helper.dom.bindEventForAttribute(t,n,e)})},getAttributes:function(e){var n={};return $.each(e.attributes,function(){this.specified&&(n[this.name]=this.value)}),n}}}),space("bundle.helper.string",function(){return{escapeHtml:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},unescapeHtml:function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'")}}}),space("bundle.helper.array",function(){return{uniqueFilter:function(e){return e=e.filter(function(e,n,t){return n==t.indexOf(e)})},removeByValue:function(e,n){var t=e.indexOf(n);return t>=0&&(e.splice(t,1),!0)},getKeys:function(e){return _.keys(e)},merge:function(e,n){for(var t in e)n[t]=e[t]}}}),space("bundle.helper.class",function(){return{callMethodInClasses:function(e,n,t){var r=_.keys(e);for(var i in r){e[r[i]][n](t)}},getMethods:function(e){var n=[],t=_.keys(e);for(var r in t){var i=t[r];bundle.helper.php.is_function(e[i])&&n.push(i)}return n},getPublicMethods:function(e){var n=[],t=_.functions(e);for(var r in t){var i=t[r];"_"!==i[0]&&n.push(i)}return n},extends:function(e,n,t){var r=_.clone(e);return r=_.assign(r,n),void 0!==t&&this.checkInterface(r,t),r},checkInterface:function(e,n){var t=this.checkInterfaceDiff(e,n);if(!_.isEmpty(t))throw'Methods "'+t.join(", ")+'" not found!';return!0},checkInterfaceDiff:function(e,n){if(!_.isObject(e))throw"Source class is not object!";if(!_.isObject(n))throw"Interface is not object!";var t=_.functions(n);return _.difference(t,_.functions(e))},isInstanceOf:function(e,n){var t=this.checkInterfaceDiff(e,n);return _.isEmpty(t)},create:function(e,n,t){var r=_.clone(e);return r=_.assign(r,n),this.callConstructor(r,t),r},createInstance:function(e,n){var t=_.clone(e);return this.callConstructor(t,n),t},setAttributes:function(e,n){return _.assign(e,n)},callConstructor:function(e,n){bundle.helper.php.method_exists(e,"__construct")&&e.__construct(n)}}}),space("bundle.helper.func",function(){var e={_lastTime:{},_timeoutId:{},refreshTimeout:function(e){this._lastTime[e]=bundle.helper.value.nowTimestamp()},issetTimeout:function(e){return!_.isEmpty(this._lastTime[e])},refreshCall:function(e,n,t){clearTimeout(this._timeoutId[e]),this._timeoutId[e]=setTimeout(n,t)}};return{callAtInterval:function(n,t,r){if(!e.issetTimeout(n))return e.refreshCall(n,t,r),e.refreshTimeout(n),!1;e.refreshTimeout(n)}}}),space("bundle.helper.jqueryUi",function(){return window.bundle.helper.jquery={},{eventTrigger:function(e,n,t){this.getElementEventNames(e,n).forEach(function(e){container.event.trigger(e,t)})},getElementEventNames:function(e,n){var t=e.element.attr("id"),r=[];return bundle.helper.php.empty(t)||r.push(e.widgetEventPrefix+"."+t+"."+n),r.push(e.widgetEventPrefix+"."+n),r}}}),space("bundle.helper.php",function(){return{is_int:function(e){return e===parseInt(e,10)},in_array:function(e,n){return-1!==$.inArray(e,n)?1:0},get_type:function(e){return this.is_function(e)?"function":this.is_object(e)?"object":this.is_array(e)?"array":void 0},is_function:function(e){return"function"==typeof e},is_object:function(e){return!(e instanceof Array)&&(null!==e&&"object"==typeof e)},isset:function(e){return null!=e},empty:function(e){return void 0===e||(""===e||0===e||"0"===e||null===e||!1===e||this.is_array(e)&&0===e.length)},is_array:function(e){return e instanceof Array},method_exists:function(e,n){return"function"==typeof e[n]}}}),space("bundle.helper.url",function(){return{setUrl:function(e){history.pushState({},"",e)}}}),space("bundle.helper.value",function(){return{default:function(e,n){return void 0===e?n:e},isEmpty:function(e){return""!==e&&null!==e&&e!==[]},nowTimestamp:function(){return(new Date).getTime()}}}),space("bundle.event.eventService",function(){return{handlers:{},holdList:{},registerHandler:function(e,n){if(_.isArray(e))for(var t in e){var r=e[t];this.registerHandler(r,n)}this._initEventArray(e),this.handlers[e].push(n),console.info("Register handler ("+bundle.helper.php.get_type(n)+') for event "'+e+'"')},removeHandler:function(e,n){this._initEventArray(e),bundle.helper.array.removeByValue(this.handlers[e],n)&&console.info('Remove handler for event "'+e+'"')},hold:function(e){this.holdList[e]=!0},unHold:function(e){this.holdList[e]=!1},isHold:function(e){return!_.isEmpty(this.holdList[e])},trigger:function(e,n){if(this.isHold(e))console.info('Event "'+e+'" is hold!');else{this._initEventArray(e);var t=this.handlers[e];this._runHandlersForEvent(e,t,n)}},_initEventArray:function(e){bundle.helper.php.isset(this.handlers[e])||(this.handlers[e]=[])},_runHandlersForEvent:function(e,n,t){if(bundle.helper.php.empty(n))console.info('Not found handlers for event "'+e+'"');else{var r=this;n.forEach(function(n){r._runHandler(e,n,t)})}},_runHandler:function(e,n,t){bundle.helper.php.is_object(n)?(n.run(t),console.info('Run handler (object) for event "'+e+'"')):bundle.helper.php.is_function(n)&&(n(t),console.info('Run handler (function) for event "'+e+'"'))}}}),space("bundle.ui.baseElementService",function(){return{id:null,instance:null,selector:null,__construct:function(e){this.instance=$(this.selector),this._registerEvents();var n=this;this.on("click",function(){var e=n.instance.attr("id");if(bundle.helper.php.empty(e)&&(e=n.id),!bundle.helper.php.empty(e)){var t={target:n.instance};container.event.trigger("baseElementService."+e+".click",t)}return!1})},_getId:function(){},_registerEvents:function(){},on:function(e,n){this.instance.on(e,n)},trigger:function(e){this.instance.trigger(e)},show:function(){this.instance.show()},hide:function(){this.instance.hide()},enable:function(){this.instance.removeAttr("disabled")},disable:function(){this.instance.attr("disabled","disabled")}}}),space("bundle.ui.baseModule",function(){return{controllerNamespace:null,initControllers:function(){bundle.helper.class.callMethodInClasses(this.controllerNamespace,"init")}}}),space("bundle.notify.notifyService",function(){return{driver:null,info:function(e){this.show(bundle.notify.notifyTypeEnum.info,e)},warning:function(e,n){this.show(bundle.notify.notifyTypeEnum.info,e,n)},success:function(e){this.show(bundle.notify.notifyTypeEnum.success,e)},error:function(e){this.show(bundle.notify.notifyTypeEnum.error,e)},danger:function(e){this.show(bundle.notify.notifyTypeEnum.danger,e)},show:function(e,n){this.driver.show({type:e,message:n})}}}),space("bundle.notify.notifyTypeEnum",function(){return{success:"success",info:"info",warning:"warning",danger:"danger",error:"error"}}),space("bundle.notify.driver.toastrDriver",function(){return{options:{},show:function(e){e.options=_.defaultTo(e.options,this.options),(0,toastr[e.type])(e.message,e.options)}}}),space("bundle.domain.baseLocalStorage",function(){var e=bundle.helper.localStorage;return{storageKey:null,get:function(n){return e.get(this.storageKey,n)},set:function(n){e.set(this.storageKey,n)},remove:function(){e.remove(this.storageKey)}}}),space("bundle.domain.baseMemoryStore",function(){return{set:function(e,n){this[e]=n},get:function(e){return this[e]},has:function(e){return void 0===this[e]},remove:function(e){delete this[e]}}}),space("bundle.rest.client",function(){var e=function(e){var n=container.authService.getToken();n&&(e.headers.Authorization=n)};return{baseUrl:null,__construct:function(e){if(_.isEmpty(e.baseUrl))throw"bundle.rest.client.__construct: baseUrl param not defined";this.baseUrl=e.baseUrl},get:function(e,n,t){var r={url:e};return t&&(r.headers=_.defaultTo(t,{})),this.sendRequest(r)},post:function(e,n,t){var r={url:e,type:"POST",data:n};return t&&(r.headers=_.defaultTo(t,{})),this.sendRequest(r)},put:function(e,n,t){var r={url:e,type:"PUT",data:n};return t&&(r.headers=_.defaultTo(t,{})),this.sendRequest(r)},del:function(e,n,t){var r={url:e,type:"DELETE"};return t&&(r.headers=_.defaultTo(t,{})),this.sendRequest(r)},sendRequest:function(e){var n=_.clone(e);this.prepareRequest(n);return new Promise(function(e,t){n.success=function(n){e(n),container.event.trigger("api.request.send.success",n)},n.error=function(e){container.event.trigger("api.request.send.error",e),t(e)},$.ajax(n)})},prepareRequest:function(n){n.headers=_.defaultTo(n.headers,{}),this.prepareRequestUrl(n),e(n)},prepareRequestUrl:function(e){e.url=this.baseUrl+"/"+e.url},getErrorMessage:function(e){return 0===e.status?"Not connect.\n Verify Network.":404==e.status?"Requested page not found. [404]":500==e.status?"Internal Server Error [500].":"Uncaught Error.\n"+e.responseText}}}),space("bundle.legalbet.component.bootstrap",function(){return{initContainer:function(){container.event=bundle.event.eventService,container.notify=bundle.notify.notifyService,container.loader=container.instance(bundle.ui.baseElementService,{selector:".js-loader"})},initConfig:function(){},run:function(e){bundle.kernel.bootstrap.run(e),this.initContainer(),this.initConfig(),console.info("legalbet kernel launch")}}}),space("bundle.legalbet.config",function(){}),space("bundle.notify.driver.notifyDriver",function(){return{options:{},show:function(e){intel.notify({status:e.type,text:e.message})}}}),space("bundle.spa.layer",function(){return{wrapperId:"app",wrapperInstance:null,getWrapperElement:function(){return _.isObject(this.wrapperInstance)||(this.wrapperInstance=$("#"+this.wrapperId)),this.wrapperInstance},getElementId:function(e){return e?this.wrapperId+"-"+e:this.wrapperId},getModuleLayer:function(e){var n=this.getElementId(e.controller+"-"+e.action);return this.getWrapperElement().find("#"+n)},has:function(e){return this.getModuleLayer(e).length},show:function(e){bundle.spa.layer.hideAll(),this.getModuleLayer(e).show()},add:function(e,n){var t='<div class="page-layer" id="'+this.getElementId(n.controller+"-"+n.action)+'">'+e+"</div>";this.getWrapperElement().append(t)},hideAll:function(){this.getWrapperElement().find(".page-layer").hide()}}}),space("bundle.spa.template",function(){return{compileElement:function(e,n){var t=e.html(),r=this.compile(t,n);e.html(r)},compile:function(e,n){var t=bundle.helper.string.unescapeHtml(e);return _.template(t)(n)}}}),space("bundle.spa.helper",function(){return{getClassName:function(e,n){return"bundle.module."+e.controller+"."+n+"."+e.action+_.startCase(_.toLower(n))},getTemplateUrl:function(e){return"/src/"+e.path+"/"+e.controller+"/view/"+e.action+".html"},isTemplate:function(e){return-1===e.search(/<!DOCTYPE html>/g)},prepareRequest:function(e){e.action=_.defaultTo(e.action,"index"),e.path=_.defaultTo(e.path,"module"),e.namespace=e.controller+"."+e.action},registerEventHandlers:function(e){var n=bundle.spa.layer.getModuleLayer(e).find($("*"));bundle.helper.dom.bindEventForList(n,"bundle.module.contact.store.contactStore.update")}}}),space("bundle.spa.module",function(){return{request:null,loadTemplate:function(e,n){var t=window.bundle.spa.helper.getTemplateUrl(e);$.ajax({url:t,success:function(t){n(),window.bundle.spa.helper.isTemplate(t)&&bundle.spa.layer.add(t,e)}})},loadDepends:function(e,n){if(_.isEmpty(n.depends))n.onLoadDepends(e);else{var t=0,r=function(){++t===n.depends.length&&(n.onLoadDepends(e),n.run(e))};for(var i in n.depends){var o=n.depends[i];bundle.kernel.loader.requireClass(o,r)}}},run:function(e){var n=_.clone(e);this.request=n,bundle.spa.helper.prepareRequest(n);this.doRequest(n,function(){var e=window.bundle.spa.helper.getClassName(n,"controller");bundle.spa.layer.show(n);bundle.kernel.loader.requireClass(e,function(){var t=use(e);_.isEmpty(t)||_.isEmpty(t.isInit)&&(t.isInit=!0,bundle.spa.module.loadDepends(n,t)),bundle.spa.helper.registerEventHandlers(n)})})},doRequest:function(e,n){bundle.spa.layer.has(e)?n():this.loadTemplate(e,n)}}}),space("bundle.spa.router",function(){var e={routes:{},routerInstance:null};return{go:function(e){e=_.defaultTo(e,""),location.hash="#"+e},goBack:function(){history.back()},goHome:function(){this.go()},addRoute:function(n,t){e.routes[n]=t},init:function(){e.routerInstance=Router(e.routes),e.routerInstance.init()}}}),space("bundle.vue.loader",function(){var e={checkAccess:function(e){var n=e.access();return!!_.isEmpty(n)||("@"!==n.auth||container.authService.isLogin()?"?"!==n.auth||!container.authService.isLogin()||(container.notify.info(lang.user.auth.alreadyAuthorizedMessage),bundle.spa.router.goBack(),!1):(bundle.module.user.service.authService.authRequired(),!1))},runController:function(e,n){var t=!1;_.isFunction(e.access)&&(t=this.checkAccess(e)),_.isFunction(e.run)&&t&&e.run(n)}};return{request:null,loadTemplate:function(e,n){var t=window.bundle.spa.helper.getTemplateUrl(e);$.ajax({url:t,success:function(t){n(),window.bundle.spa.helper.isTemplate(t)&&bundle.spa.layer.add(t,e)}})},loadDepends:function(n,t){if(_.isEmpty(t.depends))return bundle.vue.vm.ensure(t),void e.runController(t,n);var r=0,i=function(){++r===t.depends.length&&(bundle.vue.vm.ensure(t),e.runController(t,n))};for(var o in t.depends){var s=t.depends[o];-1!==s.search(/\//g)?bundle.kernel.loader.requireScript(s,i):bundle.kernel.loader.requireClass(s,i)}},run:function(e){var n=_.clone(e);this.request=n,bundle.spa.helper.prepareRequest(n);this.doRequest(n,function(){var e=window.bundle.spa.helper.getClassName(n,"controller");bundle.spa.layer.show(n);var t=function(){var t=use(e);_.isEmpty(t)||_.isEmpty(t.isInit)&&(t.isInit=!0,t.el="#app-"+n.controller+"-"+n.action,bundle.vue.loader.loadDepends(n,t)),bundle.spa.helper.registerEventHandlers(n)};bundle.kernel.loader.isDefined(e)?t():bundle.kernel.loader.requireClass(e,t)})},doRequest:function(e,n){bundle.spa.layer.has(e)?n():this.loadTemplate(e,n)}}}),space("bundle.vue.vm",function(){var e={};return{has:function(n){return!_.isEmpty(e[n])},get:function(n){return e[n]},set:function(n,t){e[n]=t},ensure:function(e){var n,t=e.el;return bundle.vue.vm.has(t)||(n=new Vue(e),this.set(t,n)),n}}}),space("bundle.module.bootstrap.modal.modalService",function(){var e={renderHeader:function(e){return'<div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Закрыть"><span aria-hidden="true">×</span></button>'+('<h4 class="modal-title">'+e+"</h4>")+"</div>"},renderBody:function(e){return'<div class="modal-body">'+e+"</div>"},renderFooter:function(e){return'<div class="modal-footer">'+e+"</div>"},renderModal:function(n){var t="";return n.title&&(t+=e.renderHeader(n.title)),n.body&&(t+=e.renderBody(n.body)),n.foot&&(t+=e.renderFooter(n.foot)),'<div class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n        <div class="modal-dialog" role="document">\n            <div class="modal-content">'+t+"</div>\n        </div>\n    </div>"}};return{show:function(n,t){var r=e.renderModal(n),i=$(r),o=$("body");$(".modal").remove(),o.append(i),i.modal()}}});